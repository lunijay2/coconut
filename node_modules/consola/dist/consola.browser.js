!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).consola=t()}(this,function(){"use strict";var e={fatal:{level:0},error:{level:0},warn:{level:1},log:{level:2},info:{level:3},success:{level:3},debug:{level:4},trace:{level:5},silent:{level:1/0},ready:{level:3},start:{level:3}};function t(e){return t=e,"[object Object]"===Object.prototype.toString.call(t)&&(!(!e.message&&!e.args)&&!e.stack);var t}let s=!1;const r=[];class o{constructor(t={}){this._reporters=t.reporters||[],this._types=t.types||e,this._level=null!=t.level?t.level:3,this._defaults=t.defaults||{},this._async=void 0!==t.async?t.async:null,this._stdout=t.stdout,this._stderr=t.stdout,this._mockFn=t.mockFn;for(const e in this._types)this[e]=this._wrapLogFn(Object.assign({type:e},this._types[e],this._defaults));this._mockFn&&this.mockTypes()}get level(){return this._level}set level(e){let t=0,s=0;for(const e in this._types){const r=this._types[e];r.level>s?s=r.level:r.level<t&&(t=r.level)}this._level=Math.min(s,Math.max(t,e))}get stdout(){return this._stdout||console._stdout}get stderr(){return this._stderr||console._stderr}create(e){return new o(Object.assign({reporters:this._reporters,level:this._level,types:this._types,defaults:this._defaults,stdout:this._stdout,stderr:this._stderr,mockFn:this._mockFn},e))}withDefaults(e){return this.create({defaults:Object.assign({},this._defaults,e)})}withTag(e){return this.withDefaults({tag:this._defaults.tag?this._defaults.tag+":"+e:e})}addReporter(e){return this._reporters.push(e),this}removeReporter(e){if(e){const t=this._reporters.indexOf(e);if(t>=0)return this._reporters.splice(t,1)}else this._reporters.splice(0);return this}setReporters(e){return this._reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const e in this._types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e]}restoreConsole(){for(const e in this._types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.stdout,"log"),this._wrapStream(this.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=(e=>{this[t](String(e).trim())}))}restoreStd(){this._restoreStream(this.stdout),this._restoreStream(this.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){s=!0}resumeLogs(){s=!1;const e=r.splice(0);for(const t of e)t[0]._logFn(t[1],t[2])}mockTypes(e){if(this._mockFn=e||this._mockFn,"function"==typeof this._mockFn)for(const e in this._types)this[e]=this._mockFn(e,this._types[e])||this[e]}_wrapLogFn(e){return function(){if(!s)return this._logFn(e,arguments);r.push([this,e,arguments])}.bind(this)}_logFn(e,s){if(e.level>this._level)return!!this._async&&Promise.resolve(!1);const r=Object.assign({date:new Date,args:[]},e);if(1===s.length&&t(s[0])?Object.assign(r,s[0]):r.args=Array.from(s),r.message&&(r.args.unshift(r.message),delete r.message),r.additional&&(Array.isArray(r.additional)||(r.additional=r.additional.split("\n")),r.args.push("\n"+r.additional.join("\n")),delete r.additional),this._async)return this._logAsync(r);this._log(r)}_log(e){for(const t of this._reporters)t.log(e,{async:!1,stdout:this.stdout,stderr:this.stderr})}_logAsync(e){return Promise.all(this._reporters.map(t=>t.log(e,{async:!0,stdout:this.stdout,stderr:this.stderr})))}}o.prototype.add=o.prototype.addReporter,o.prototype.remove=o.prototype.removeReporter,o.prototype.clear=o.prototype.removeReporter,o.prototype.withScope=o.prototype.withTag,o.prototype.mock=o.prototype.mockTypes,o.prototype.pause=o.prototype.pauseLogs,o.prototype.resume=o.prototype.resumeLogs;const i={info:"cyan"},l={0:"red",1:"yellow",2:"white",3:"green"};class n{constructor(e){this.options=Object.assign({},e)}log(e){const t=e.level<1?console.__error||console.error:1===e.level&&console.warn?console.__warn||console.warn:console.__log||console.log,s="log"!==e.type?`[${e.type.toUpperCase()}]`:"",r=e.tag?`[${e.tag.toUpperCase()}]`:"",o=`[${new Date(e.date).toLocaleTimeString()}]`,n=`color: ${i[e.type]||l[e.level]}; background-color: inherit;`;t("%c"+o+r+"%c"+s,`color: ${e.additionalColor||"grey"}; background-color: inherit;`,n,...e.args)}}return"undefined"!=typeof window&&window.consola||function(){const e=new o({reporters:[new n]});return e.Consola=o,e.BrowserReporter=n,e}()});
